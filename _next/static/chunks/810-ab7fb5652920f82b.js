"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[810],{9163:function(t,e,n){let i;function s(){return null!=i||(i=new AudioContext),"suspended"===i.state&&i.resume(),i}n.d(e,{k:function(){return s}})},744:function(t,e,n){n.d(e,{Be:function(){return eS},Dc:function(){return ep},Dy:function(){return eA},E8:function(){return eM},Io:function(){return eR},Jp:function(){return ed},No:function(){return t7},TU:function(){return ew},Zx:function(){return eg},a0:function(){return ev},ab:function(){return eC},co:function(){return e_},mK:function(){return t8},mb:function(){return ei},o6:function(){return eh},wz:function(){return ec},xA:function(){return tB},xU:function(){return eo},zP:function(){return eF}});var i,s,o,r,a,l,u,h,p,c,d,f,m,g,v,y,P,M,_,w,b,k,D,F,A,S,R,C,I,G,B,E,W,L,x,T,O,j,N,U,z,V,H,$,q,X,K,Z,J,Y,Q,tt,te,tn,ti,ts,to,tr,ta,tl,tu,th,tp,tc,td,tf,tm,tg=Object.defineProperty,tv=Object.defineProperties,ty=Object.getOwnPropertyDescriptors,tP=Object.getOwnPropertySymbols,tM=Object.prototype.hasOwnProperty,t_=Object.prototype.propertyIsEnumerable,tw=t=>{throw TypeError(t)},tb=(t,e,n)=>e in t?tg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,tk=(t,e)=>{for(var n in e||(e={}))tM.call(e,n)&&tb(t,n,e[n]);if(tP)for(var n of tP(e))t_.call(e,n)&&tb(t,n,e[n]);return t},tD=(t,e)=>tv(t,ty(e)),tF=(t,e,n)=>e.has(t)||tw("Cannot "+n),tA=(t,e,n)=>(tF(t,e,"read from private field"),n?n.call(t):e.get(t)),tS=(t,e,n)=>e.has(t)?tw("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),tR=(t,e,n,i)=>(tF(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n),tC=(t,e,n)=>(tF(t,e,"access private method"),n),tI=(t,e,n)=>new Promise((i,s)=>{var o=t=>{try{a(n.next(t))}catch(t){s(t)}},r=t=>{try{a(n.throw(t))}catch(t){s(t)}},a=t=>t.done?i(t.value):Promise.resolve(t.value).then(o,r);a((n=n.apply(t,e)).next())}),tG={fetch:t=>fetch(t)},tB=class{constructor(t="smplr"){tS(this,s),tS(this,i),"undefined"!=typeof window&&"caches"in window?tR(this,i,caches.open(t)):tR(this,i,Promise.reject("CacheStorage not supported"))}fetch(t){return tI(this,null,function*(){let e=new Request(t);try{return yield tC(this,s,o).call(this,e)}catch(n){let t=yield fetch(e);return yield tC(this,s,r).call(this,e,t),t}})}};function tE(t){let e=t.filter(t=>!!t);return e.reduce((t,e)=>{let n="output"in t?t.output:t,i="input"in e?e.input:e;return n.connect(i),e}),()=>{e.reduce((t,e)=>{let n="output"in t?t.output:t,i="input"in e?e.input:e;return n.disconnect(i),e})}}function tW(t){let e=t,n=new Set;return{subscribe:function(t){return n.add(t),t(e),()=>{n.delete(t)}},set:function(t){e=t,n.forEach(t=>t(e))},get:function(){return e}}}function tL(t){return t*t/16129}i=new WeakMap,s=new WeakSet,o=function(t){return tI(this,null,function*(){let e=yield tA(this,i),n=yield e.match(t);if(n)return n;throw Error("Not found")})},r=function(t,e){return tI(this,null,function*(){try{let n=yield tA(this,i);yield n.put(t,e.clone())}catch(t){}})};var tx=class{constructor(t,e){var n,i,s;this.context=t,tS(this,a),tS(this,l),tS(this,u),tS(this,h),tS(this,p),tS(this,c),tS(this,d,!1),tR(this,c,{destination:null!=(n=null==e?void 0:e.destination)?n:t.destination,volume:null!=(i=null==e?void 0:e.volume)?i:100,volumeToGain:null!=(s=null==e?void 0:e.volumeToGain)?s:tL}),this.input=t.createGain(),tR(this,a,t.createGain()),tR(this,h,tE([this.input,tA(this,a),tA(this,c).destination]));let o=tW(tA(this,c).volume);this.setVolume=o.set,tR(this,p,o.subscribe(t=>{tA(this,a).gain.value=tA(this,c).volumeToGain(t)}))}addInsert(t){if(tA(this,d))throw Error("Can't add insert to disconnected channel");null!=tA(this,u)||tR(this,u,[]),tA(this,u).push(t),tA(this,h).call(this),tR(this,h,tE([this.input,...tA(this,u),tA(this,a),tA(this,c).destination]))}addEffect(t,e,n){if(tA(this,d))throw Error("Can't add effect to disconnected channel");let i=this.context.createGain();i.gain.value=n;let s="input"in e?e.input:e,o=tE([tA(this,a),i,s]);null!=tA(this,l)||tR(this,l,[]),tA(this,l).push({name:t,mix:i,disconnect:o})}sendEffect(t,e){var n;if(tA(this,d))throw Error("Can't send effect to disconnected channel");let i=null==(n=tA(this,l))?void 0:n.find(e=>e.name===t);i?i.mix.gain.value=e:console.warn("Send bus not found: "+t)}disconnect(){var t;tA(this,d)||(tR(this,d,!0),tA(this,h).call(this),tA(this,p).call(this),null==(t=tA(this,l))||t.forEach(t=>t.disconnect()),tR(this,l,void 0))}};function tT(t){return void 0===t?void 0:"number"==typeof t?t:function(t){let e=/^([a-gA-G]?)(#{1,}|b{1,}|)(-?\d+)$/.exec(t);if(!e)return;let n=e[1].toUpperCase();if(!n)return;let i=e[2],s="b"===i[0]?-i.length:i.length,o=e[3]?+e[3]:4;return[0,2,4,5,7,9,11][(n.charCodeAt(0)+3)%7]+s+12*(o+1)}(t)}a=new WeakMap,l=new WeakMap,u=new WeakMap,h=new WeakMap,p=new WeakMap,c=new WeakMap,d=new WeakMap;var tO={volume:0,tune:0,detune:0,ampRelease:.3,ampAttack:0,lpfCutoffHz:2e4,offset:0,loop:!1,loopStart:0,loopEnd:0},tj=Object.keys(tO);function tN(t){let e={};for(let n of tj){let i=t[n];void 0!==i&&(e[n]=i)}return e}function tU(t){var e,n,i,s,o;let r,a,l;return void 0!==t.key?(r=a=t.key,l=t.key):(t.keyRange?[r,a]=t.keyRange:(r=0,a=127),l=t.pitch),{keyLow:r,keyHigh:a,pitch:l,velLow:null!=(n=null==(e=t.velRange)?void 0:e[0])?n:0,velHigh:null!=(s=null==(i=t.velRange)?void 0:i[1])?s:127,ccRange:t.ccRange,seqPosition:null!=(o=t.seqPosition)?o:1,group:t.group,offBy:t.offBy,sample:t.sample,ref:t}}function tz(t){var e,n,i,s,o,r,a,l;return{keyLow:null!=(n=null==(e=t.keyRange)?void 0:e[0])?n:0,keyHigh:null!=(s=null==(i=t.keyRange)?void 0:i[1])?s:127,velLow:null!=(r=null==(o=t.velRange)?void 0:o[0])?r:0,velHigh:null!=(l=null==(a=t.velRange)?void 0:a[1])?l:127,ccRange:t.ccRange,seqLength:t.seqLength,group:t.group,offBy:t.offBy,regions:t.regions.map(tU),ref:t}}function tV(t,e){var n;if(!e)return!0;for(let[i,[s,o]]of Object.entries(e)){let e=parseInt(i,10),r=null!=(n=t.get(e))?n:0;if(r<s||r>o)return!1}return!0}var tH=class{constructor(t){tS(this,f),tS(this,m),tR(this,f,t.groups.map(tz)),tR(this,m,new Map)}match(t,e,n){var i,s,o,r;let a=[];for(let l=0;l<tA(this,f).length;l++){let u=tA(this,f)[l];if(t<u.keyLow||t>u.keyHigh||e<u.velLow||e>u.velHigh||!tV(n,u.ccRange))continue;let h=null!=(i=tA(this,m).get(l))?i:0;for(let i of u.regions)if(!(t<i.keyLow)&&!(t>i.keyHigh)&&!(e<i.velLow)&&!(e>i.velHigh)&&tV(n,i.ccRange)){if(void 0!==u.seqLength){let t=i.seqPosition-1;if(h%u.seqLength!==t)continue}a.push({sample:i.sample,pitch:null!=(s=i.pitch)?s:t,group:null!=(o=i.group)?o:u.group,offBy:null!=(r=i.offBy)?r:u.offBy,groupRef:u.ref,regionRef:i.ref})}void 0!==u.seqLength&&tA(this,m).set(l,h+1)}return a}};function t$(t){if("undefined"==typeof document)return null;let e=function(){if("undefined"==typeof navigator)return!1;let t=navigator.userAgent;return t.includes("Safari")&&!t.includes("Chrome")&&!t.includes("Chromium")}(),n=document.createElement("audio");for(let i=0;i<t.length;i++){let s=t[i];if(e&&"ogg"===s)continue;let o=n.canPlayType(`audio/${s}`);if("probably"===o||"maybe"===o)return s;if("m4a"===s){let t=n.canPlayType("audio/aac");if("probably"===t||"maybe"===t)return s}}return null}f=new WeakMap,m=new WeakMap;var tq=class{constructor(t,e){var n;tS(this,g),tS(this,v),tS(this,y,new Map),tR(this,g,t),tR(this,v,null!=(n=null==e?void 0:e.storage)?n:tG)}load(t,e){return tI(this,null,function*(){var n,i;let s="object"==typeof e?e.buffers:void 0,o="function"==typeof e?e:null==e?void 0:e.onProgress,r=null!=(i=null!=(n=t$(t.samples.formats))?n:t.samples.formats[0])?i:"ogg",a=t.samples.baseUrl.replace(/\/$/,""),l=function(t){let e=new Set;for(let n of t.groups)for(let t of n.regions)e.add(t.sample);return[...e]}(t),u=l.length,h=0,p=new Map;return yield Promise.all(l.map(e=>tI(this,null,function*(){var n,i;let l=null==s?void 0:s.get(e);if(l){p.set(e,l),h++,null==o||o(h,u);return}let c=null!=(i=null==(n=t.samples.map)?void 0:n[e])?i:e,d=`${a}/${c}.${r}`,f=tA(this,y).get(d);if(!f){let t=yield function(t,e,n){return tI(this,null,function*(){e=e.replace(/#/g,"%23").replace(/([^:]\/)\/+/g,"$1");let i=yield n.fetch(e);if(200!==i.status){console.warn("Error loading buffer. Invalid status: ",i.status,e);return}try{let e=yield i.arrayBuffer();return yield t.decodeAudioData(e)}catch(t){console.warn("Error loading buffer",t,e)}})}(tA(this,g),d,tA(this,v));t&&(f=t,tA(this,y).set(d,f))}f&&p.set(e,f),h++,null==o||o(h,u)}))),p})}};g=new WeakMap,v=new WeakMap,y=new WeakMap;var tX=class{constructor(t){this.compare=t,tS(this,P,[])}push(t){let e=tA(this,P).length,n=0,i=e-1,s=e;for(;n<=i;){let e=Math.floor((n+i)/2);0>this.compare(t,tA(this,P)[e])?(s=e,i=e-1):n=e+1}tA(this,P).splice(s,0,t)}pop(){return tA(this,P).shift()}peek(){return tA(this,P)[0]}removeAll(t){let e=tA(this,P).length;return tR(this,P,tA(this,P).filter(e=>!t(e))),tA(this,P).length!==e}clear(){tR(this,P,[])}size(){return tA(this,P).length}};P=new WeakMap;var tK=class{constructor(t,e){var n,i;tS(this,D),tS(this,M),tS(this,_),tS(this,w),tS(this,b),tS(this,k),tR(this,M,t),tR(this,_,(null!=(n=null==e?void 0:e.lookaheadMs)?n:200)/1e3),tR(this,w,null!=(i=null==e?void 0:e.intervalMs)?i:50),tR(this,b,new tX((t,e)=>t.time-e.time))}schedule(t,e){var n;let i=tA(this,M).currentTime,s=null!=(n="object"==typeof t?t.time:void 0)?n:i;if(s<=i+tA(this,_))return e(t),tZ;let o={time:s,event:t,callback:e};return tA(this,b).push(o),tC(this,D,F).call(this),()=>{tA(this,b).removeAll(t=>t===o)}}stop(){tA(this,b).clear(),void 0!==tA(this,k)&&(clearInterval(tA(this,k)),tR(this,k,void 0))}};M=new WeakMap,_=new WeakMap,w=new WeakMap,b=new WeakMap,k=new WeakMap,D=new WeakSet,F=function(){void 0===tA(this,k)&&tR(this,k,setInterval(()=>{let t=tA(this,M).currentTime+tA(this,_);for(;tA(this,b).size()>0&&tA(this,b).peek().time<=t;){let t=tA(this,b).pop();t.callback(t.event)}0===tA(this,b).size()&&(clearInterval(tA(this,k)),tR(this,k,void 0))},tA(this,w)))};var tZ=()=>{},tJ=class{constructor(t,e,n,i,s,o,r){let a;tS(this,A),tS(this,S),tS(this,R),tS(this,C),tS(this,I),tS(this,G,"playing"),tS(this,B,[]),tR(this,A,t),this.stopId=s,this.group=o,tR(this,I,n.ampRelease);let l=t.createBufferSource();l.buffer=e;let u=n.detune;l.detune?l.detune.value=u:l.playbackRate.value=Math.pow(2,u/1200),n.loopAuto?(l.loop=!0,l.loopStart=e.duration*n.loopAuto.startRatio,l.loopEnd=e.duration*n.loopAuto.endRatio):n.loop&&(l.loop=!0,l.loopStart=n.loopStart,l.loopEnd=n.loopEnd||e.duration),n.lpfCutoffHz<2e4&&((a=t.createBiquadFilter()).type="lowpass",a.frequency.value=n.lpfCutoffHz);let h=t.createGain();h.gain.value=tL(n.velocity)*Math.pow(10,n.volume/20);let p=t.createGain();p.gain.value=1,a?(l.connect(a),a.connect(h)):l.connect(h),h.connect(p),p.connect(i);let c=null!=r?r:t.currentTime;tR(this,C,c);let d=n.offset>0?n.offset/e.sampleRate:0;l.start(c,d),tR(this,S,l),tR(this,R,p),l.onended=()=>{for(let t of(tR(this,G,"stopped"),p.disconnect(),h.disconnect(),null==a||a.disconnect(),l.disconnect(),tA(this,B)))t();tR(this,B,[])}}stop(t){if("playing"!==tA(this,G))return;tR(this,G,"stopping");let e=null!=t?t:tA(this,A).currentTime;if(e<=tA(this,C))tA(this,S).stop(e);else{let t=e+tA(this,I);tA(this,R).gain.cancelScheduledValues(e),tA(this,R).gain.setValueAtTime(1,e),tA(this,R).gain.linearRampToValueAtTime(0,t),tA(this,S).stop(t)}}onEnded(t){"stopped"===tA(this,G)?t():tA(this,B).push(t)}get isActive(){return"stopped"!==tA(this,G)}};A=new WeakMap,S=new WeakMap,R=new WeakMap,C=new WeakMap,I=new WeakMap,G=new WeakMap,B=new WeakMap;var tY=class{constructor(){tS(this,x),tS(this,E,new Set),tS(this,W,new Map),tS(this,L,new Map)}add(t){tA(this,E).add(t),tQ(tA(this,W),t.stopId).add(t),void 0!==t.group&&tQ(tA(this,L),t.group).add(t),t.onEnded(()=>tC(this,x,T).call(this,t))}stopAll(t){for(let e of[...tA(this,E)])e.stop(t)}stopById(t,e){let n=tA(this,W).get(t);if(n)for(let t of[...n])t.stop(e)}stopGroup(t,e){let n=tA(this,L).get(t);if(n)for(let t of[...n])t.stop(e)}get activeCount(){return tA(this,E).size}};function tQ(t,e){let n=t.get(e);return n||(n=new Set,t.set(e,n)),n}function t0(t,e){return t&&e?n=>{t(n),e(n)}:null!=t?t:e}E=new WeakMap,W=new WeakMap,L=new WeakMap,x=new WeakSet,T=function(t){var e,n;tA(this,E).delete(t),null==(e=tA(this,W).get(t.stopId))||e.delete(t),void 0!==t.group&&(null==(n=tA(this,L).get(t.group))||n.delete(t))};var t1={samples:{baseUrl:"",formats:[]},groups:[]};function t2(t){return"object"==typeof t&&null!==t&&"groups"in t&&Array.isArray(t.groups)}var t5=class{constructor(t,e,n){var i,s,o;tS(this,Q),tS(this,O,{loaded:0,total:0}),tS(this,j,new Map),tS(this,N),tS(this,U),tS(this,z),tS(this,V),tS(this,H),tS(this,$),tS(this,q),tS(this,X),tS(this,K),tS(this,Z),tS(this,J),tS(this,Y,new Map);let r=t2(e)?e:void 0,a=t2(e)?n:e;this.context=t,tR(this,N,null==r?void 0:r.defaults),tR(this,U,null!=(i=null==a?void 0:a.velocity)?i:100),tR(this,K,null==a?void 0:a.onLoadProgress),tR(this,Z,null==a?void 0:a.onStart),tR(this,J,null==a?void 0:a.onEnded),(null==r?void 0:r.aliases)&&tR(this,z,new Map(Object.entries(r.aliases))),tR(this,q,new tx(t,{destination:null==a?void 0:a.destination,volume:null==a?void 0:a.volume,volumeToGain:null==a?void 0:a.volumeToGain})),tR(this,$,null!=(s=null==a?void 0:a.scheduler)?s:new tK(t)),tR(this,V,new tH(null!=r?r:t1)),tR(this,H,new tY),tR(this,X,null!=(o=null==a?void 0:a.loader)?o:new tq(t,{storage:null==a?void 0:a.storage})),r?this.load=tA(this,X).load(r,(t,e)=>{var n;tR(this,O,{loaded:t,total:e}),null==(n=tA(this,K))||n.call(this,{loaded:t,total:e})}).then(t=>(tR(this,j,t),this)):this.load=Promise.resolve(this)}loadInstrument(t,e){return tR(this,N,t.defaults),tR(this,z,t.aliases?new Map(Object.entries(t.aliases)):void 0),tR(this,V,new tH(t)),tA(this,X).load(t,{buffers:e,onProgress:(t,e)=>{var n;tR(this,O,{loaded:t,total:e}),null==(n=tA(this,K))||n.call(this,{loaded:t,total:e})}}).then(t=>{tR(this,j,t)})}get loadProgress(){return tA(this,O)}get output(){return tA(this,q)}setCC(t,e){tA(this,Y).set(t,e)}start(t){let e=tC(this,Q,te).call(this,t),n=tA(this,$).schedule(e,t=>tC(this,Q,tt).call(this,t));return t=>{n(),tA(this,H).stopById(e.stopId,t)}}stop(t){void 0===t?tA(this,H).stopAll():"string"==typeof t||"number"==typeof t?tA(this,H).stopById(t):void 0!==t.stopId?tA(this,H).stopById(t.stopId,t.time):tA(this,H).stopAll(t.time)}disconnect(){tA(this,H).stopAll(),tA(this,q).disconnect(),tA(this,$).stop()}};function t3(t){if(0===t.length)return[];let e=[...t].sort(([t],[e])=>t-e);return e.map(([t,n],i)=>({keyRange:[0===i?0:Math.floor((e[i-1][0]+t)/2)+1,i===e.length-1?127:Math.floor((t+e[i+1][0])/2)],pitch:t,sample:n}))}function t6(t){return"object"==typeof t&&"string"==typeof t.baseUrl&&"string"==typeof t.name&&Array.isArray(t.samples)&&Array.isArray(t.groupNames)&&"object"==typeof t.nameToSampleName&&"object"==typeof t.sampleGroupVariations}O=new WeakMap,j=new WeakMap,N=new WeakMap,U=new WeakMap,z=new WeakMap,V=new WeakMap,H=new WeakMap,$=new WeakMap,q=new WeakMap,X=new WeakMap,K=new WeakMap,Z=new WeakMap,J=new WeakMap,Y=new WeakMap,Q=new WeakSet,tt=function(t){let{midi:e,velocity:n,time:i,stopId:s,duration:o,detune:r,lpfCutoffHz:a,loop:l,ampRelease:u,onStart:h,onEnded:p}=t,c=tA(this,V).match(e,n,tA(this,Y));for(let t of c)void 0!==t.offBy&&tA(this,H).stopGroup(t.offBy,i);let d=!1;for(let f of c){let c=tA(this,j).get(f.sample);if(!c)continue;let m=function(t,e,n,i,s,o){var r,a,l,u,h;let p=tk(tk(tk(tk({},tO),t),tN(e)),tN(n)),c=null!=(a=null!=(r=n.pitch)?r:n.key)?a:i,d=(i-c+p.tune)*100+p.detune;return(null==o?void 0:o.detune)!==void 0&&(d+=o.detune),{detune:d,velocity:s,volume:p.volume,ampRelease:null!=(l=null==o?void 0:o.ampRelease)?l:p.ampRelease,ampAttack:p.ampAttack,lpfCutoffHz:null!=(u=null==o?void 0:o.lpfCutoffHz)?u:p.lpfCutoffHz,offset:p.offset,loop:null!=(h=null==o?void 0:o.loop)?h:p.loop,loopStart:p.loopStart,loopEnd:p.loopEnd,ampVelCurve:n.ampVelCurve,loopAuto:n.loopAuto}}(tA(this,N),f.groupRef,f.regionRef,e,n,{detune:r,lpfCutoffHz:a,loop:l,ampRelease:u}),g=new tJ(this.context,c,m,tA(this,q).input,s,f.group,i);if(tA(this,H).add(g),d||(null==h||h(t),d=!0),p&&g.onEnded(()=>p(t)),null!=o){let t=(null!=i?i:this.context.currentTime)+o;setTimeout(()=>g.stop(t),Math.max(0,(t-this.context.currentTime)*1e3))}}},te=function(t){var e,n,i,s,o,r,a,l;if("string"==typeof t||"number"==typeof t){let s=null!=(i=null!=(n=tT(t))?n:null==(e=tA(this,z))?void 0:e.get(String(t)))?i:0;return{note:t,midi:s,velocity:tA(this,U),stopId:t,onStart:tA(this,Z),onEnded:tA(this,J)}}let u=null!=(r=null!=(o=tT(t.note))?o:null==(s=tA(this,z))?void 0:s.get(String(t.note)))?r:0;return tD(tk({},t),{midi:u,velocity:null!=(a=t.velocity)?a:tA(this,U),stopId:null!=(l=t.stopId)?l:t.note,onStart:t0(tA(this,Z),t.onStart),onEnded:t0(tA(this,J),t.onEnded)})};var t4={baseUrl:"",name:"",samples:[],groupNames:[],nameToSampleName:{},sampleGroupVariations:{}};function t8(){return Object.keys(t9)}var t9={"TR-808":"https://smpldsnds.github.io/drum-machines/TR-808/dm.json","Casio-RZ1":"https://smpldsnds.github.io/drum-machines/Casio-RZ1/dm.json","LM-2":"https://smpldsnds.github.io/drum-machines/LM-2/dm.json","MFB-512":"https://smpldsnds.github.io/drum-machines/MFB-512/dm.json","Roland CR-8000":"https://smpldsnds.github.io/drum-machines/Roland-CR-8000/dm.json"},t7=class{constructor(t,e){tS(this,tn),tS(this,ti,t4);let n=function(t){var e,n,i;let s={instrument:null!=(e=null==t?void 0:t.instrument)?e:"TR-808",storage:null!=(n=null==t?void 0:t.storage)?n:tG,url:null!=(i=null==t?void 0:t.url)?i:""};if("string"==typeof s.instrument){if(s.url||(s.url=t9[s.instrument]),!s.url)throw Error("Invalid instrument: "+s.instrument)}else if(!t6(s.instrument))throw Error("Invalid instrument: "+s.instrument);return s}(e),i={destination:null==e?void 0:e.destination,volume:null==e?void 0:e.volume,velocity:null==e?void 0:e.velocity,storage:n.storage,onLoadProgress:null==e?void 0:e.onLoadProgress};tR(this,tn,new t5(t,i)),this.output=tA(this,tn).output;let s=t6(n.instrument)?Promise.resolve(n.instrument):function(t,e){return tI(this,null,function*(){var n,i;let s=yield e.fetch(t),o=yield s.json();for(let e of(o.baseUrl=t.replace("/dm.json",""),o.groupNames=[],o.nameToSampleName={},o.sampleGroupVariations={},o.samples)){o.nameToSampleName[e]=e;let t=-1!==e.indexOf("/")?"/":"-",[s,r]=e.split(t);o.groupNames.includes(s)||o.groupNames.push(s),null!=(n=o.nameToSampleName)[s]||(n[s]=e),null!=(i=o.sampleGroupVariations)[s]||(i[s]=[]),r&&o.sampleGroupVariations[s].push(`${s}${t}${r}`)}return o})}(n.url,n.storage);this.load=s.then(t=>(tR(this,ti,t),tA(this,tn).loadInstrument(function(t){let e={},n=[];for(let[i,s]of(t.samples.forEach((t,i)=>{let s=36+i;e[t]=s,n.push({sample:t,keyRange:[s,s],pitch:s})}),Object.entries(t.nameToSampleName)))if(s){let n=t.samples.indexOf(s);n>=0&&(e[i]=36+n)}return{samples:{baseUrl:t.baseUrl,formats:["ogg","m4a"]},groups:[{regions:n}],aliases:e}}(t)))).then(()=>this)}getSampleNames(){return tA(this,ti).samples.slice()}getGroupNames(){return tA(this,ti).groupNames.slice()}getSampleNamesForGroup(t){var e;return null!=(e=tA(this,ti).sampleGroupVariations[t])?e:[]}start(t){var e;let n="object"==typeof t?t:{note:t};return tA(this,tn).start(tD(tk({},n),{stopId:null!=(e=n.stopId)?e:n.note}))}stop(t){return tA(this,tn).stop(t)}disconnect(){return tA(this,tn).disconnect()}loaded(){return tI(this,null,function*(){return console.warn("deprecated: use load instead"),this.load})}get sampleNames(){return console.log("deprecated: Use getGroupNames instead"),tA(this,ti).groupNames.slice()}getVariations(t){var e;return console.warn("deprecated: use getSampleNamesForGroup"),null!=(e=tA(this,ti).sampleGroupVariations[t])?e:[]}};function et(t){let e={};return void 0!==t.locc64&&void 0!==t.hicc64&&(e["64"]=[t.locc64,t.hicc64]),Object.keys(e).length>0?e:void 0}function ee(t,e){return tI(this,null,function*(){try{let e=yield fetch(t);return yield e.json()}catch(e){throw console.warn(`Can't load SFZ file ${t}`,e),Error(`Can't load SFZ file ${t}`)}})}tn=new WeakMap,ti=new WeakMap;var en=class{constructor(t,e){var n;this.context=t,tS(this,ts);let i={destination:e.destination,volume:e.volume,velocity:e.velocity,storage:e.storage,onLoadProgress:e.onLoadProgress};tR(this,ts,new t5(t,i));let s=null!=(n=e.storage)?n:tG;this.load=(function(t,e){return tI(this,null,function*(){if("string"==typeof t)return ee(t,e);if("global"in t)return t;if("websfzUrl"in t){let n=yield ee(t.websfzUrl,e);return null!=n.meta||(n.meta={}),t.name&&(n.meta.name=t.name),t.baseUrl&&(n.meta.baseUrl=t.baseUrl),t.formats&&(n.meta.formats=t.formats),n}throw Error("Invalid instrument: "+JSON.stringify(t))})})(e.instrument,s).then(t=>tA(this,ts).loadInstrument(function(t){var e,n,i;let s=String(null!=(e=t.global.default_path)?e:""),o=t.groups.map(t=>(function(t,e){let n={regions:t.regions.map(t=>(function(t,e){let n={sample:e+t.sample};void 0!==t.key?n.key=t.key:void 0!==t.lokey&&void 0!==t.hikey&&(n.keyRange=[t.lokey,t.hikey]),void 0!==t.pitch_keycenter&&(n.pitch=t.pitch_keycenter),void 0!==t.lovel&&void 0!==t.hivel&&(n.velRange=[t.lovel,t.hivel]);let i=et(t);return i&&(n.ccRange=i),void 0!==t.seq_position&&(n.seqPosition=t.seq_position),void 0!==t.off_by&&(n.offBy=t.off_by),void 0!==t.group&&(n.group=t.group),void 0!==t.trigger&&(n.trigger=t.trigger),void 0!==t.volume&&(n.volume=t.volume),n})(t,e))};void 0!==t.lokey&&void 0!==t.hikey&&(n.keyRange=[t.lokey,t.hikey]),void 0!==t.lovel&&void 0!==t.hivel&&(n.velRange=[t.lovel,t.hivel]);let i=et(t);return i&&(n.ccRange=i),void 0!==t.off_by&&(n.offBy=t.off_by),void 0!==t.group&&(n.group=t.group),void 0!==t.seq_length&&(n.seqLength=t.seq_length),void 0!==t.trigger&&(n.trigger=t.trigger),void 0!==t.volume&&(n.volume=t.volume),n})(t,s));return{meta:{name:t.meta.name,description:t.meta.description,license:t.meta.license,source:t.meta.source,tags:t.meta.tags},samples:{baseUrl:null!=(n=t.meta.baseUrl)?n:"",formats:null!=(i=t.meta.formats)?i:["ogg"]},groups:o}}(t))).then(()=>this)}get output(){return tA(this,ts).output}start(t){return tA(this,ts).start("object"==typeof t?t:{note:t})}stop(t){return tA(this,ts).stop(t)}setCC(t,e){return tA(this,ts).setCC(t,e)}loaded(){return tI(this,null,function*(){return console.warn("deprecated: use load instead"),this.load})}disconnect(){return tA(this,ts).disconnect()}};function ei(){return Object.keys(es)}ts=new WeakMap;var es={CP80:"https://danigb.github.io/samples/gs-e-pianos/CP80/cp80.websfz.json",PianetT:"https://danigb.github.io/samples/gs-e-pianos/Pianet T/pianet-t.websfz.json",WurlitzerEP200:"https://danigb.github.io/samples/gs-e-pianos/Wurlitzer EP200/wurlitzer-ep200.websfz.json",TX81Z:"https://danigb.github.io/samples/vcsl/TX81Z/tx81z-fm-piano.websfz.json"},eo=class extends en{constructor(t,e){var n;super(t,tD(tk({},e),{instrument:null!=(n=es[e.instrument])?n:e.instrument}));let i=tW(0);this.tremolo={level:t=>i.set(tL(t))};let s=function(t,e){let n=t.createGain(),i=t.createGain();n.channelCount=2,n.channelCountMode="explicit";let s=t.createChannelSplitter(2),o=t.createGain(),r=t.createGain(),a=t.createChannelMerger(2),l=t.createOscillator();l.type="sine",l.frequency.value=1,l.start();let u=t.createGain(),h=t.createOscillator();h.type="sine",h.frequency.value=1.1,h.start();let p=t.createGain();n.connect(s),s.connect(o,0),s.connect(r,1),o.connect(a,0,0),r.connect(a,0,1),l.connect(u),u.connect(o.gain),h.connect(p),p.connect(r.gain),a.connect(i);let c=e(t=>{u.gain.value=t,p.gain.value=t});return n.disconnect=()=>{c(),l.stop(),h.stop(),n.disconnect(s),s.disconnect(o,0),s.disconnect(r,1),o.disconnect(a,0,0),r.disconnect(a,0,1),l.disconnect(o),h.disconnect(r),a.disconnect(i)},{input:n,output:i}}(t,i.subscribe);this.output.addInsert(s)}};function er(t,e){var n;let i=null!=(n=e.formats)?n:["ogg","m4a"],s=function(t){let e=[];for(let n of t.split("\n")){let t=n.indexOf("//");if(t>=0&&(n=n.slice(0,t)),!(n=n.trim()))continue;let i=0;for(;i<n.length;){let t;for(;i<n.length&&" "===n[i];)i++;if(i>=n.length)break;if("<"===n[i]){let t=n.indexOf(">",i);if(t<0)break;let s=n.slice(i+1,t).trim().toLowerCase();e.push({type:"header",value:s}),i=t+1;continue}let s=n.indexOf("=",i);if(s<0)break;let o=n.slice(i,s).trim(),r=s+1,a=n.slice(s+1),l=a.match(/\s+\S+=\S/);if(l&&void 0!==l.index?(t=a.slice(0,l.index).trim(),r=s+1+l.index+l[0].length-l[0].trimStart().length):(t=a.trim(),r=n.length),o&&void 0!==t){let n=Number(t);e.push({type:"prop",key:o,value:isNaN(n)?t:n})}i=r}}return e}(t),o="global",r={},a={},l={},u=[],h=null;function p(){if("global"===o)Object.assign(r,l);else if("group"===o)h=function(t){let e={regions:[]},n=ea(t,"lokey"),i=ea(t,"hikey");void 0!==n&&void 0!==i&&(e.keyRange=[n,i]);let s=ea(t,"lovel"),o=ea(t,"hivel");void 0!==s&&void 0!==o&&(e.velRange=[s,o]);let r=ea(t,"seq_length");void 0!==r&&(e.seqLength=r);let a=ea(t,"group");void 0!==a&&(e.group=a);let l=ea(t,"off_by");void 0!==l&&(e.offBy=l);let u=ea(t,"volume");void 0!==u&&(e.volume=u);let h=ea(t,"ampeg_release");void 0!==h&&(e.ampRelease=h);let p=ea(t,"tune");return void 0!==p&&(e.tune=p/100),e}(a=tk({},l)),u.push(h);else if("region"===o){let t=function(t,e){let n=function(t,e){let n=t[e];if("string"==typeof n)return n}(t,"sample");if(!n)return null;let i={sample:e(n)},s=ea(t,"key");if(void 0!==s)i.key=s;else{let e=ea(t,"lokey"),n=ea(t,"hikey");void 0!==e&&void 0!==n&&(i.keyRange=[e,n])}let o=ea(t,"pitch_keycenter");void 0!==o?i.pitch=o:i.keyRange?i.pitch=i.keyRange[0]:void 0!==s&&(i.pitch=s);let r=ea(t,"lovel"),a=ea(t,"hivel");void 0!==r&&void 0!==a&&(i.velRange=[r,a]);let l=ea(t,"seq_position");void 0!==l&&(i.seqPosition=l);let u=ea(t,"group");void 0!==u&&(i.group=u);let h=ea(t,"off_by");void 0!==h&&(i.offBy=h);let p=ea(t,"volume");void 0!==p&&(i.volume=p);let c=ea(t,"tune");void 0!==c&&(i.tune=c/100);let d=ea(t,"ampeg_release");void 0!==d&&(i.ampRelease=d);let f=function(t,e){for(let[e,n]of Object.entries(t))if(e.startsWith("amp_velcurve_")){let t=Number(e.slice(13));if(!isNaN(t)&&"number"==typeof n)return[t,n]}}(t,0);return f&&(i.ampVelCurve=f),i}(tk(tk(tk({},r),a),l),e.pathFromSampleName);t&&(h||(h={regions:[]},u.push(h)),h.regions.push(t))}l={}}for(let t of s)"header"===t.type?(p(),"group"===(o=t.value)&&(a={},h=null)):l[t.key]=t.value;p();let c=u.filter(t=>t.regions.length>0);return{samples:{baseUrl:e.baseUrl,formats:i},groups:c}}function ea(t,e){let n=t[e];if("number"==typeof n)return n}var el="https://smpldsnds.github.io/sgossner-vcsl",eu=[];function eh(){return tI(this,null,function*(){return eu.length?eu:eu=yield fetch(el+"/sfz_files.json").then(t=>t.json())})}var ep=class{constructor(t,e={}){var n,i;this.context=t,tS(this,to);let s={instrument:null!=(n=e.instrument)?n:"Strings/Violin/Violin - Arco",storage:null!=(i=e.storage)?i:tG},o={destination:e.destination,volume:e.volume,velocity:e.velocity,storage:s.storage,onLoadProgress:e.onLoadProgress};tR(this,to,new t5(t,o));let r=`${el}/${s.instrument}.sfz`,a=s.instrument.slice(0,s.instrument.lastIndexOf("/")+1),l=`${el}/${a}`;this.load=fetch(r).then(t=>t.text()).then(t=>tA(this,to).loadInstrument(er(t,{baseUrl:l,pathFromSampleName:t=>t.replace(/\.wav$/i,""),formats:["ogg","m4a"]}))).then(()=>this)}get output(){return tA(this,to).output}get loadProgress(){return tA(this,to).loadProgress}start(t){return tA(this,to).start("object"==typeof t?t:{note:t})}stop(t){return tA(this,to).stop(t)}disconnect(){return tA(this,to).disconnect()}};function ec(){return Object.keys(ef)}to=new WeakMap;var ed=class extends ep{constructor(t,e){var n;super(t,tD(tk({},e),{instrument:ef[null!=(n=e.instrument)?n:""]}))}},ef={"Balafon - Hard Mallet":"Idiophones/Struck Idiophones/Balafon - Hard Mallet","Balafon - Keyswitch":"Idiophones/Struck Idiophones/Balafon - Keyswitch","Balafon - Soft Mallet":"Idiophones/Struck Idiophones/Balafon - Soft Mallet","Balafon - Traditional Mallet":"Idiophones/Struck Idiophones/Balafon - Traditional Mallet","Tubular Bells 1":"Idiophones/Struck Idiophones/Tubular Bells 1","Tubular Bells 2":"Idiophones/Struck Idiophones/Tubular Bells 2","Vibraphone - Bowed":"Idiophones/Struck Idiophones/Vibraphone - Bowed","Vibraphone - Hard Mallets":"Idiophones/Struck Idiophones/Vibraphone - Hard Mallets","Vibraphone - Keyswitch":"Idiophones/Struck Idiophones/Vibraphone - Keyswitch","Vibraphone - Soft Mallets":"Idiophones/Struck Idiophones/Vibraphone - Soft Mallets","Xylophone - Hard Mallets":"Idiophones/Struck Idiophones/Xylophone - Hard Mallets","Xylophone - Keyswitch":"Idiophones/Struck Idiophones/Xylophone - Keyswitch","Xylophone - Medium Mallets":"Idiophones/Struck Idiophones/Xylophone - Medium Mallets","Xylophone - Soft Mallets":"Idiophones/Struck Idiophones/Xylophone - Soft Mallets"},em={"300 STRINGS CELLO":["300 STRINGS","CELL"],"300 STRINGS VIOLA":["300 STRINGS","VIOL"]};function eg(){return["300 STRINGS CELLO","300 STRINGS VIOLA","8VOICE CHOIR","BASSA+STRNGS","BOYS CHOIR","CHA CHA FLT","CHM CLARINET","CHMB 3 VLNS","CHMB ALTOSAX","CHMB FEMALE","CHMB MALE VC","CHMB TNR SAX","CHMB TRMBONE","CHMB TRUMPET","CHMBLN CELLO","CHMBLN FLUTE","CHMBLN OBOE","DIXIE+TRMBN","FOXTROT+SAX","HALFSP.BRASS","MIXED STRGS","MKII BRASS","MKII GUITAR","MKII ORGAN","MKII SAX","MKII VIBES","MKII VIOLINS","MOVE BS+STGS","STRGS+BRASS","TROMB+TRMPT","TRON 16VLNS","TRON CELLO","TRON FLUTE","TRON VIOLA"]}var ev=class{constructor(t,e={}){var n,i;this.context=t,tS(this,tr);let s={instrument:null!=(n=e.instrument)?n:"MKII VIOLINS",storage:null!=(i=e.storage)?i:tG},o={destination:e.destination,volume:e.volume,velocity:e.velocity,storage:s.storage,onLoadProgress:e.onLoadProgress};tR(this,tr,new t5(t,o));let r=em[s.instrument],a=r?r[0]:s.instrument,l=`https://smpldsnds.github.io/archiveorg-mellotron/${a}/`;this.load=fetch(l+"files.json").then(t=>t.json()).then(t=>tA(this,tr).loadInstrument(function(t,e){var n;let i=[];for(let s of t){if(e.variation&&!s.includes(e.variation))continue;let t=tT(null!=(n=s.split(" ")[0])?n:"");t&&i.push([t,s])}let s=t3(i);return{samples:{baseUrl:`https://smpldsnds.github.io/archiveorg-mellotron/${e.instrument}/`,formats:["ogg","m4a"]},groups:[{regions:s.map(({keyRange:t,pitch:e,sample:n})=>({sample:n,keyRange:t,pitch:e,loopAuto:{startRatio:.1,endRatio:.9}}))}]}}(t,{instrument:a,variation:null==r?void 0:r[1]}))).then(()=>this)}get output(){return tA(this,tr).output}get loadProgress(){return tA(this,tr).loadProgress}start(t){return tA(this,tr).start("object"==typeof t?t:{note:t})}stop(t){return tA(this,tr).stop(t)}disconnect(){return tA(this,tr).disconnect()}};tr=new WeakMap;var ey=["preDelay","bandwidth","inputDiffusion1","inputDiffusion2","decay","decayDiffusion1","decayDiffusion2","damping","excursionRate","excursionDepth","wet","dry"],eP=new WeakMap,eM=class{constructor(t){tS(this,ta),tS(this,tl),tS(this,tu),this.input=t.createGain(),tR(this,tu,t.destination),tR(this,tl,(function(t){return tI(this,null,function*(){let e=eP.get(t);if(!e){let n=new Blob(['"use strict";(()=>{var f=class extends AudioWorkletProcessor{_pDLength;_preDelay;_pDWrite;_lp1;_lp2;_lp3;_excPhase;_taps;_Delays;sampleRate;static get parameterDescriptors(){return[["preDelay",0,0,sampleRate-1,"k-rate"],["bandwidth",.9999,0,1,"k-rate"],["inputDiffusion1",.75,0,1,"k-rate"],["inputDiffusion2",.625,0,1,"k-rate"],["decay",.5,0,1,"k-rate"],["decayDiffusion1",.7,0,.999999,"k-rate"],["decayDiffusion2",.5,0,.999999,"k-rate"],["damping",.005,0,1,"k-rate"],["excursionRate",.5,0,2,"k-rate"],["excursionDepth",.7,0,2,"k-rate"],["wet",1,0,1,"k-rate"],["dry",0,0,1,"k-rate"]].map(e=>new Object({name:e[0],defaultValue:e[1],minValue:e[2],maxValue:e[3],automationRate:e[4]}))}constructor(e){super(),this.sampleRate=sampleRate,this._Delays=[],this._pDLength=sampleRate+(128-sampleRate%128),this._preDelay=new Float32Array(this._pDLength),this._pDWrite=0,this._lp1=0,this._lp2=0,this._lp3=0,this._excPhase=0,[.004771345,.003595309,.012734787,.009307483,.022579886,.149625349,.060481839,.1249958,.030509727,.141695508,.089244313,.106280031].forEach(a=>this.makeDelay(a,sampleRate)),this._taps=Int16Array.from([.008937872,.099929438,.064278754,.067067639,.066866033,.006283391,.035818689,.011861161,.121870905,.041262054,.08981553,.070931756,.011256342,.004065724],a=>Math.round(a*sampleRate))}makeDelay(e,a){let t=Math.round(e*a),s=2**Math.ceil(Math.log2(t));this._Delays.push([new Float32Array(s),t-1,0,s-1])}writeDelay(e,a){return this._Delays[e][0][this._Delays[e][1]]=a}readDelay(e){return this._Delays[e][0][this._Delays[e][2]]}readDelayAt(e,a){let t=this._Delays[e];return t[0][t[2]+a&t[3]]}readDelayCAt(e,a){let t=this._Delays[e],s=a-~~a,d=~~a+t[2]-1,r=t[3],D=t[0][d++&r],l=t[0][d++&r],h=t[0][d++&r],y=t[0][d&r],u=(3*(l-h)-D+y)/2,m=2*h+D-(5*l+y)/2,c=(h-D)/2;return((u*s+m)*s+c)*s+l}process(e,a,t){let s=~~t.preDelay[0],d=t.bandwidth[0],r=t.inputDiffusion1[0],D=t.inputDiffusion2[0],l=t.decay[0],h=t.decayDiffusion1[0],y=t.decayDiffusion2[0],u=1-t.damping[0],m=t.excursionRate[0]/sampleRate,c=t.excursionDepth[0]*sampleRate/1e3,w=t.wet[0]*.6,A=t.dry[0];if(e[0].length==2)for(let i=127;i>=0;i--)this._preDelay[this._pDWrite+i]=(e[0][0][i]+e[0][1][i])*.5,a[0][0][i]=e[0][0][i]*A,a[0][1][i]=e[0][1][i]*A;else if(e[0].length>0){this._preDelay.set(e[0][0],this._pDWrite);for(let i=127;i>=0;i--)a[0][0][i]=a[0][1][i]=e[0][0][i]*A}else this._preDelay.set(new Float32Array(128),this._pDWrite);let o=0;for(;o<128;){let i=0,b=0;this._lp1+=d*(this._preDelay[(this._pDLength+this._pDWrite-s+o)%this._pDLength]-this._lp1);let p=this.writeDelay(0,this._lp1-r*this.readDelay(0));p=this.writeDelay(1,r*(p-this.readDelay(1))+this.readDelay(0)),p=this.writeDelay(2,r*p+this.readDelay(1)-D*this.readDelay(2)),p=this.writeDelay(3,D*(p-this.readDelay(3))+this.readDelay(2));let k=D*p+this.readDelay(3),g=c*(1+Math.cos(this._excPhase*6.28)),x=c*(1+Math.sin(this._excPhase*6.2847)),_=this.writeDelay(4,k+l*this.readDelay(11)+h*this.readDelayCAt(4,g));this.writeDelay(5,this.readDelayCAt(4,g)-h*_),this._lp2+=u*(this.readDelay(5)-this._lp2),_=this.writeDelay(6,l*this._lp2-y*this.readDelay(6)),this.writeDelay(7,this.readDelay(6)+y*_),_=this.writeDelay(8,k+l*this.readDelay(7)+h*this.readDelayCAt(8,x)),this.writeDelay(9,this.readDelayCAt(8,x)-h*_),this._lp3+=u*(this.readDelay(9)-this._lp3),_=this.writeDelay(10,l*this._lp3-y*this.readDelay(10)),this.writeDelay(11,this.readDelay(10)+y*_),i=this.readDelayAt(9,this._taps[0])+this.readDelayAt(9,this._taps[1])-this.readDelayAt(10,this._taps[2])+this.readDelayAt(11,this._taps[3])-this.readDelayAt(5,this._taps[4])-this.readDelayAt(6,this._taps[5])-this.readDelayAt(7,this._taps[6]),b=this.readDelayAt(5,this._taps[7])+this.readDelayAt(5,this._taps[8])-this.readDelayAt(6,this._taps[9])+this.readDelayAt(7,this._taps[10])-this.readDelayAt(9,this._taps[11])-this.readDelayAt(10,this._taps[12])-this.readDelayAt(11,this._taps[13]),a[0][0][o]+=i*w,a[0][1][o]+=b*w,this._excPhase+=m,o++;for(let R=0,n=this._Delays[0];R<this._Delays.length;n=this._Delays[++R])n[1]=n[1]+1&n[3],n[2]=n[2]+1&n[3]}return this._pDWrite=(this._pDWrite+128)%this._pDLength,!0}};registerProcessor("DattorroReverb",f);})();'],{type:"application/javascript"}),i=URL.createObjectURL(n);e=t.audioWorklet.addModule(i),eP.set(t,e)}return yield e,new AudioWorkletNode(t,"DattorroReverb",{outputChannelCount:[2]})})})(t).then(t=>(this.input.connect(t),t.connect(tA(this,tu)),tR(this,ta,t),this)))}get paramNames(){return ey}getParam(t){var e;return null==(e=tA(this,ta))?void 0:e.parameters.get("preDelay")}get isReady(){return void 0!==tA(this,ta)}ready(){return tA(this,tl)}connect(t){tA(this,ta)&&(tA(this,ta).disconnect(tA(this,tu)),tA(this,ta).connect(t)),tR(this,tu,t)}};function e_(){return["Pizzicato","Arco","Switched"]}ta=new WeakMap,tl=new WeakMap,tu=new WeakMap,new WeakMap;var ew=class{constructor(t,e={}){var n,i,s;this.context=t,tS(this,th);let o={instrument:null!=(n=e.instrument)?n:"Arco",storage:null!=(i=e.storage)?i:tG},r={destination:e.destination,volume:e.volume,velocity:e.velocity,storage:o.storage,onLoadProgress:e.onLoadProgress};tR(this,th,new t5(t,r));let a=(s=o.instrument,`https://smpldsnds.github.io/sfzinstruments-dsmolken-double-bass/d_smolken_rubner_bass_${({Arco:"arco",Pizzicato:"pizz",Switched:"switched"})[s]}.sfz`);this.load=fetch(a).then(t=>t.text()).then(t=>tA(this,th).loadInstrument(er(t,{baseUrl:"https://smpldsnds.github.io/sfzinstruments-dsmolken-double-bass",pathFromSampleName:t=>t.replace(/\\/g,"/").replace(/\.wav$/i,""),formats:["ogg","m4a"]}))).then(()=>this)}get output(){return tA(this,th).output}get loadProgress(){return tA(this,th).loadProgress}start(t){return tA(this,th).start("object"==typeof t?t:{note:t})}stop(t){return tA(this,th).stop(t)}disconnect(){return tA(this,th).disconnect()}};th=new WeakMap;var eb=["MusyngKite","FluidR3_GM"],ek="MusyngKite",eD=["accordion","acoustic_bass","acoustic_grand_piano","acoustic_guitar_nylon","acoustic_guitar_steel","agogo","alto_sax","applause","bagpipe","banjo","baritone_sax","bassoon","bird_tweet","blown_bottle","brass_section","breath_noise","bright_acoustic_piano","celesta","cello","choir_aahs","church_organ","clarinet","clavinet","contrabass","distortion_guitar","drawbar_organ","dulcimer","electric_bass_finger","electric_bass_pick","electric_grand_piano","electric_guitar_clean","electric_guitar_jazz","electric_guitar_muted","electric_piano_1","electric_piano_2","english_horn","fiddle","flute","french_horn","fretless_bass","fx_1_rain","fx_2_soundtrack","fx_3_crystal","fx_4_atmosphere","fx_5_brightness","fx_6_goblins","fx_7_echoes","fx_8_scifi","glockenspiel","guitar_fret_noise","guitar_harmonics","gunshot","harmonica","harpsichord","helicopter","honkytonk_piano","kalimba","koto","lead_1_square","lead_2_sawtooth","lead_3_calliope","lead_4_chiff","lead_5_charang","lead_6_voice","lead_7_fifths","lead_8_bass__lead","marimba","melodic_tom","music_box","muted_trumpet","oboe","ocarina","orchestra_hit","orchestral_harp","overdriven_guitar","pad_1_new_age","pad_2_warm","pad_3_polysynth","pad_4_choir","pad_5_bowed","pad_6_metallic","pad_7_halo","pad_8_sweep","pan_flute","percussive_organ","piccolo","pizzicato_strings","recorder","reed_organ","reverse_cymbal","rock_organ","seashore","shakuhachi","shamisen","shanai","sitar","slap_bass_1","slap_bass_2","soprano_sax","steel_drums","string_ensemble_1","string_ensemble_2","synth_bass_1","synth_bass_2","synth_brass_1","synth_brass_2","synth_choir","synth_drum","synth_strings_1","synth_strings_2","taiko_drum","tango_accordion","telephone_ring","tenor_sax","timpani","tinkle_bell","tremolo_strings","trombone","trumpet","tuba","tubular_bells","vibraphone","viola","violin","voice_oohs","whistle","woodblock","xylophone"];function eF(){return eb}function eA(){return eD}var eS=class{constructor(t,e){this.context=t,tS(this,tp),tS(this,tc,!1),this.config=function(t){var e,n,i,s,o;if(!t.instrument&&!t.instrumentUrl)throw Error("Soundfont: instrument or instrumentUrl is required");let r={kit:null!=(e=t.kit)?e:ek,instrument:t.instrument,storage:null!=(n=t.storage)?n:tG,extraGain:null!=(i=t.extraGain)?i:5,loadLoopData:null!=(s=t.loadLoopData)&&s,loopDataUrl:t.loopDataUrl,instrumentUrl:null!=(o=t.instrumentUrl)?o:""};if(r.instrument&&r.instrument.startsWith("http")&&(console.warn("Use 'instrumentUrl' instead of 'instrument' to load from a URL"),r.instrumentUrl=r.instrument,r.instrument=void 0),r.instrumentUrl)(r.kit!==ek||r.instrument)&&console.warn("Soundfont: 'kit' and 'instrument' config parameters are ignored because 'instrumentUrl' is explicitly set.");else if(r.instrument)r.instrumentUrl=function(t,e){var n;let i=null!=(n=t$(["ogg","mp3"]))?n:"mp3";return console.debug(`Soundfont: using ${i} format for ${t}`),`https://gleitz.github.io/midi-js-soundfonts/${e}/${t}-${i}.js`}(r.instrument,r.kit);else throw Error("Soundfont: 'instrument' or 'instrumentUrl' configuration parameter is required");return r.loadLoopData&&r.instrument&&!r.loopDataUrl&&(r.loopDataUrl=function(t,e){if(!t.startsWith("http"))return`https://goldst.dev/midi-js-soundfonts/${e}/${t}-loop.json`}(r.instrument,r.kit)),r}(e);let n={destination:e.destination,volume:e.volume,velocity:e.velocity,storage:this.config.storage,onLoadProgress:e.onLoadProgress};tR(this,tp,new t5(t,n));let i=t.createGain();i.gain.value=this.config.extraGain,tA(this,tp).output.addInsert(i),this.load=(function(t,e){return tI(this,null,function*(){let[{buffers:n,noteNames:i},s]=yield Promise.all([function(t,e){return tI(this,null,function*(){let n=function(t){let e=t.indexOf("MIDI.Soundfont.");if(e<0)throw Error("Invalid MIDI.js Soundfont format");let n=t.indexOf("=",e)+2,i=t.lastIndexOf(",");return JSON.parse(t.slice(n,i)+"}")}((yield(yield e.storage.fetch(e.instrumentUrl)).text())),i=Object.keys(n),s=new Map;return yield Promise.all(i.map(e=>tI(this,null,function*(){if(tT(e))try{var i;let o=function(t){let e=window.atob(t),n=e.length,i=new Uint8Array(n);for(let t=0;t<n;t++)i[t]=e.charCodeAt(t);return i.buffer}((i=n[e]).slice(i.indexOf(",")+1)),r=yield t.decodeAudioData(o);s.set(e,r)}catch(t){console.warn(`Soundfont: failed to decode note ${e}`,t instanceof Error?t.message:t)}}))),{buffers:s,noteNames:[...s.keys()]}})}(t,e),function(t,e=44100){return tI(this,null,function*(){if(t)try{let n=yield fetch(t);if(200!==n.status)return;let i=yield n.json(),s={};return Object.keys(i).forEach(t=>{let n=tT(t);if(n){let o=i[t];s[n]=[o[0]/e,o[1]/e]}}),s}catch(t){return}})}(e.loopDataUrl)]);return{buffers:n,noteNames:i,loopData:s}})})(t,this.config).then(({buffers:t,noteNames:e,loopData:n})=>(tR(this,tc,!!n),tA(this,tp).loadInstrument(function(t,e){let n=[];for(let e of t){let t=tT(e);void 0!==t&&n.push([t,e])}return{samples:{baseUrl:"",formats:["ogg"]},groups:[{regions:t3(n).map(({keyRange:t,pitch:n,sample:i})=>{let s={sample:i,keyRange:t,pitch:n};if(e){let t=e[n];t&&(s.loop=!0,s.loopStart=t[0],s.loopEnd=t[1])}return s})}]}}(e,n),t))).then(()=>this)}get hasLoops(){return tA(this,tc)}get output(){return tA(this,tp).output}loaded(){return tI(this,null,function*(){return console.warn("deprecated: use load instead"),this.load})}disconnect(){return tA(this,tp).disconnect()}start(t){return tA(this,tp).start("object"==typeof t?t:{note:t})}stop(t){return tA(this,tp).stop(void 0===t?void 0:t)}};tp=new WeakMap,tc=new WeakMap;var eR=class{constructor(t,e){tS(this,td),tS(this,tf,[]),this.context=t,this.options=e,tR(this,td,new t5(t,{destination:e.destination,volume:e.volume,velocity:e.velocity})),this.load=(function(t){return tI(this,null,function*(){let e=new Uint8Array((yield fetch(t.url).then(t=>t.arrayBuffer())));return t.createSoundfont(e)})})(e).then(t=>{this.soundfont=t,tR(this,tf,t.instruments.map(t=>t.header.name))}).then(()=>this)}get instrumentNames(){return tA(this,tf)}get output(){return tA(this,td).output}loadInstrument(t){var e;let n=null==(e=this.soundfont)?void 0:e.instruments.find(e=>e.header.name===t);if(!n)return;let{json:i,buffers:s}=function(t,e){let n=new Map,i=[];for(let s of t.zones){let{sample:t,keyRange:o}=s,{header:r}=t,a=r.name,l=new Float32Array(t.data.length);for(let e=0;e<t.data.length;e++)l[e]=t.data[e]/32768;let u=e.createBuffer(1,l.length,r.sampleRate);u.getChannelData(0).set(l),n.set(a,u);let h=r.startLoop>=0&&r.endLoop>r.startLoop;i.push(tk(tk({sample:a,pitch:r.originalPitch},o&&{keyRange:[o.lo,o.hi]}),h&&{loop:!0,loopStart:r.startLoop/r.sampleRate,loopEnd:r.endLoop/r.sampleRate}))}return{json:{samples:{baseUrl:"",formats:[]},groups:[{regions:i}]},buffers:n}}(n,this.context);return tA(this,td).loadInstrument(i,s)}start(t){return tA(this,td).start("object"==typeof t?t:{note:t})}stop(t){return tA(this,td).stop(void 0===t?void 0:t)}disconnect(){tA(this,td).disconnect()}};td=new WeakMap,tf=new WeakMap;var eC=class{constructor(t,e){this.context=t,tS(this,tm);let n=tk({baseUrl:"https://danigb.github.io/samples/splendid-grand-piano",storage:tG,detune:0,volume:100,velocity:100,decayTime:.5},e),i=function(t){let{notesToLoad:e}=t,n=(e?eI.filter(t=>t.vel_range[0]<=e.velocityRange[1]&&t.vel_range[1]>=e.velocityRange[0]):eI).map(t=>{let n=t3(e?t.samples.filter(([t])=>e.notes.includes(t)):t.samples).map(({keyRange:t,pitch:e,sample:n})=>({keyRange:t,pitch:e,sample:n})),i={velRange:t.vel_range,regions:n};return"cutoff"in t&&void 0!==t.cutoff&&(i.lpfCutoffHz=t.cutoff),i});return{samples:{baseUrl:t.baseUrl,formats:["ogg","m4a"]},defaults:{ampRelease:t.decayTime,detune:t.detune},groups:n}}(n);tR(this,tm,new t5(t,i,{storage:n.storage,destination:n.destination,volume:n.volume,velocity:n.velocity,onLoadProgress:n.onLoadProgress})),this.load=tA(this,tm).load.then(()=>this)}get output(){return tA(this,tm).output}get loadProgress(){return tA(this,tm).loadProgress}loaded(){return tI(this,null,function*(){return console.warn("deprecated: use load instead"),this.load})}start(t){return tA(this,tm).start(t)}stop(t){return tA(this,tm).stop(t)}disconnect(){return tA(this,tm).disconnect()}};tm=new WeakMap;var eI=[{name:"PPP",vel_range:[1,40],cutoff:1e3,samples:[[23,"PP-B-1"],[27,"PP-D#0"],[29,"PP-F0"],[31,"PP-G0"],[33,"PP-A0"],[35,"PP-B0"],[37,"PP-C#1"],[38,"PP-D1"],[40,"PP-E1"],[41,"PP-F1"],[43,"PP-G1"],[45,"PP-A1"],[47,"PP-B1"],[48,"PP-C2"],[50,"PP-D2"],[52,"PP-E2"],[53,"PP-F2"],[55,"PP-G2"],[56,"PP-G#2"],[57,"PP-A2"],[58,"PP-A#2"],[59,"PP-B2"],[60,"PP-C3"],[62,"PP-D3"],[64,"PP-E3"],[65,"PP-F3"],[67,"PP-G3"],[69,"PP-A3"],[71,"PP-B3"],[72,"PP-C4"],[74,"PP-D4"],[76,"PP-E4"],[77,"PP-F4"],[79,"PP-G4"],[80,"PP-G#4"],[81,"PP-A4"],[82,"PP-A#4"],[83,"PP-B4"],[85,"PP-C#5"],[86,"PP-D5"],[87,"PP-D#5"],[89,"PP-F5"],[90,"PP-F#5"],[91,"PP-G5"],[92,"PP-G#5"],[93,"PP-A5"],[94,"PP-A#5"],[95,"PP-B5"],[96,"PP-C6"],[97,"PP-C#6"],[98,"PP-D6"],[99,"PP-D#6"],[100,"PP-E6"],[101,"PP-F6"],[102,"PP-F#6"],[103,"PP-G6"],[104,"PP-G#6"],[105,"PP-A6"],[106,"PP-A#6"],[107,"PP-B6"],[108,"PP-C7"]]},{name:"PP",vel_range:[41,67],samples:[[23,"PP-B-1"],[27,"PP-D#0"],[29,"PP-F0"],[31,"PP-G0"],[33,"PP-A0"],[35,"PP-B0"],[37,"PP-C#1"],[38,"PP-D1"],[40,"PP-E1"],[41,"PP-F1"],[43,"PP-G1"],[45,"PP-A1"],[47,"PP-B1"],[48,"PP-C2"],[50,"PP-D2"],[52,"PP-E2"],[53,"PP-F2"],[55,"PP-G2"],[56,"PP-G#2"],[57,"PP-A2"],[58,"PP-A#2"],[59,"PP-B2"],[60,"PP-C3"],[62,"PP-D3"],[64,"PP-E3"],[65,"PP-F3"],[67,"PP-G3"],[69,"PP-A3"],[71,"PP-B3"],[72,"PP-C4"],[74,"PP-D4"],[76,"PP-E4"],[77,"PP-F4"],[79,"PP-G4"],[80,"PP-G#4"],[81,"PP-A4"],[82,"PP-A#4"],[83,"PP-B4"],[85,"PP-C#5"],[86,"PP-D5"],[87,"PP-D#5"],[89,"PP-F5"],[90,"PP-F#5"],[91,"PP-G5"],[92,"PP-G#5"],[93,"PP-A5"],[94,"PP-A#5"],[95,"PP-B5"],[96,"PP-C6"],[97,"PP-C#6"],[98,"PP-D6"],[99,"PP-D#6"],[100,"PP-E6"],[101,"PP-F6"],[102,"PP-F#6"],[103,"PP-G6"],[104,"PP-G#6"],[105,"PP-A6"],[106,"PP-A#6"],[107,"PP-B6"],[108,"PP-C7"]]},{name:"MP",vel_range:[68,84],samples:[[23,"Mp-B-1"],[27,"Mp-D#0"],[29,"Mp-F0"],[31,"Mp-G0"],[33,"Mp-A0"],[35,"Mp-B0"],[37,"Mp-C#1"],[38,"Mp-D1"],[40,"Mp-E1"],[41,"Mp-F1"],[43,"Mp-G1"],[45,"Mp-A1"],[47,"Mp-B1"],[48,"Mp-C2"],[50,"Mp-D2"],[52,"Mp-E2"],[53,"Mp-F2"],[55,"Mp-G2"],[56,"Mp-G#2"],[57,"Mp-A2"],[58,"Mp-A#2"],[59,"Mp-B2"],[60,"Mp-C3"],[62,"Mp-D3"],[64,"Mp-E3"],[65,"Mp-F3"],[67,"Mp-G3"],[69,"Mp-A3"],[71,"Mp-B3"],[72,"Mp-C4"],[74,"Mp-D4"],[76,"Mp-E4"],[77,"Mp-F4"],[79,"Mp-G4"],[80,"Mp-G#4"],[81,"Mp-A4"],[82,"Mp-A#4"],[83,"Mp-B4"],[85,"Mp-C#5"],[86,"Mp-D5"],[87,"Mp-D#5"],[88,"Mp-E5"],[89,"Mp-F5"],[90,"Mp-F#5"],[91,"Mp-G5"],[92,"Mp-G#5"],[93,"Mp-A5"],[94,"Mp-A#5"],[95,"Mp-B5"],[96,"Mp-C6"],[97,"Mp-C#6"],[98,"Mp-D6"],[99,"Mp-D#6"],[100,"PP-E6"],[101,"Mp-F6"],[102,"Mp-F#6"],[103,"Mp-G6"],[104,"Mp-G#6"],[105,"Mp-A6"],[106,"Mp-A#6"],[107,"PP-B6"],[108,"PP-C7"]]},{name:"MF",vel_range:[85,100],samples:[[23,"Mf-B-1"],[27,"Mf-D#0"],[29,"Mf-F0"],[31,"Mf-G0"],[33,"Mf-A0"],[35,"Mf-B0"],[37,"Mf-C#1"],[38,"Mf-D1"],[40,"Mf-E1"],[41,"Mf-F1"],[43,"Mf-G1"],[45,"Mf-A1"],[47,"Mf-B1"],[48,"Mf-C2"],[50,"Mf-D2"],[52,"Mf-E2"],[53,"Mf-F2"],[55,"Mf-G2"],[56,"Mf-G#2"],[57,"Mf-A2"],[58,"Mf-A#2"],[59,"Mf-B2"],[60,"Mf-C3"],[62,"Mf-D3"],[64,"Mf-E3"],[65,"Mf-F3"],[67,"Mf-G3"],[69,"Mf-A3"],[71,"Mf-B3"],[72,"Mf-C4"],[74,"Mf-D4"],[76,"Mf-E4"],[77,"Mf-F4"],[79,"Mf-G4"],[80,"Mf-G#4"],[81,"Mf-A4"],[82,"Mf-A#4"],[83,"Mf-B4"],[85,"Mf-C#5"],[86,"Mf-D5"],[87,"Mf-D#5"],[88,"Mf-E5"],[89,"Mf-F5"],[90,"Mf-F#5"],[91,"Mf-G5"],[92,"Mf-G#5"],[93,"Mf-A5"],[94,"Mf-A#5"],[95,"Mf-B5"],[96,"Mf-C6"],[97,"Mf-C#6"],[98,"Mf-D6"],[99,"Mf-D#6"],[100,"Mf-E6"],[101,"Mf-F6"],[102,"Mf-F#6"],[103,"Mf-G6"],[104,"Mf-G#6"],[105,"Mf-A6"],[106,"Mf-A#6"],[107,"Mf-B6"],[108,"PP-C7"]]},{name:"FF",vel_range:[101,127],samples:[[23,"FF-B-1"],[27,"FF-D#0"],[29,"FF-F0"],[31,"FF-G0"],[33,"FF-A0"],[35,"FF-B0"],[37,"FF-C#1"],[38,"FF-D1"],[40,"FF-E1"],[41,"FF-F1"],[43,"FF-G1"],[45,"FF-A1"],[47,"FF-B1"],[48,"FF-C2"],[50,"FF-D2"],[52,"FF-E2"],[53,"FF-F2"],[55,"FF-G2"],[56,"FF-G#2"],[57,"FF-A2"],[58,"FF-A#2"],[59,"FF-B2"],[60,"FF-C3"],[62,"FF-D3"],[64,"FF-E3"],[65,"FF-F3"],[67,"FF-G3"],[69,"FF-A3"],[71,"FF-B3"],[72,"FF-C4"],[74,"FF-D4"],[76,"FF-E4"],[77,"FF-F4"],[79,"FF-G4"],[80,"FF-G#4"],[81,"FF-A4"],[82,"FF-A#4"],[83,"FF-B4"],[85,"FF-C#5"],[86,"FF-D5"],[88,"FF-E5"],[89,"FF-F5"],[91,"FF-G5"],[93,"FF-A5"],[95,"MF-B5"],[96,"MF-C6"],[97,"MF-C#6"],[98,"MF-D6"],[99,"MF-D#6"],[100,"MF-E6"],[102,"MF-F#6"],[103,"MF-G6"],[104,"MF-G#6"],[105,"MF-A6"],[106,"MF-A#6"],[107,"MF-B6"],[108,"MF-C7"]]}]}}]);